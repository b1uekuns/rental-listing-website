<%- include('../partials/admin_header') %>

<div class="admin-layout">
  <%- include('../partials/admin_sidebar') %>

  <div class="admin-content">
    <h1>Quản lý liên hệ</h1>

    <div class="admin-content-wrapper">
      <% if (locals.success) { %>
      <div class="alert alert-success"><%= locals.success %></div>
      <% } %> <% if (locals.error) { %>
      <div class="alert alert-danger"><%= locals.error %></div>
      <% } %>

      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Họ tên</th>
              <th>Email</th>
              <th>Chủ đề</th>
              <th>Nội dung</th>
              <th>Thời gian</th>
              <th>Hành động</th>
            </tr>
          </thead>
          <tbody>
            <% contacts.forEach(c => { %>
            <tr>
              <td><%= c.name %></td>
              <td>
                <a href="mailto:<%= c.email %>" class="text-blue">
                  <%= c.email %>
                </a>
              </td>
              <td class="text-bold"><%= c.subject %></td>
              <td class="max-width-400">
                <%= c.message %>
              </td>
              <td><%= new Date(c.created_at).toLocaleString('vi-VN') %></td>
              <td>
                <form
                  action="/admin/contacts/<%= c.id %>/delete"
                  method="POST"
                  class="inline-form"
                  onsubmit="return confirm('Xác nhận xóa liên hệ này?');"
                >
                  <button type="submit" class="btn btn-danger btn-small">
                    Xóa
                  </button>
                </form>
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/admin_footer') %>
